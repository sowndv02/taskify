CREATE DATABASE TASKIFY;
USE TASKIFY;
 
CREATE TABLE BOARD
(
	Id: STRING -- REQUIRED
	DESCRIPTION: STRING -- REQUIRED
    TITLE: STRING -- REQUIRED
    TYPE: STRING -- REQUIRED
	OWNERIDS: ARRAY
    MEMBERIDS: ARRAY
    COLUMNORDERID: ARRAY
    CREATEDAT: DATETIME 
    UPDATEDAT: DATETIME
    DESTROY: BOOL
);
 
 
CREATE TABLE COLUMN
(
	Id: STRING -- REQUIRED
	BOARDID: STRING -- REQUIRED
	TITLE: STRING -- REQUIRED
	CARDORDERID: ARRAY
	CREATEDAT: DATETIME
	UPDATEDAT: DATETIME
	DESTROY: BOOL
);
 
 
CREATE TABLE CARD
(
	ID: STRING -- REQUIRED
	BOARDID: STRING -- REQUIRED
	COLUMNID: STRING -- REQUIRED
	TITLE: STRING -- REQUIRED
	COVER: STRING
	DESCRIPTION: STRING
	MEMBERIDS: ARRAY
	COMMENTS : ARRAY 
	{
		USERID: STRING,
		USEREMAIL: STRING
		USERAVATAR: STRING
		USERDISPLAYNAME: STRING 
		CONTENT: STRING
		CREATEDAT: DATETIME
	}
	ATTACHMENTS: ARRAY
	{
		FILENAME: STRING
		FILETYPE: STRING
		FILEURL: STRING
		CREATEDAT: DATETIME
	}
	CREATEDAT: DATETIME
	UPDATEDAT: DATETIME
	DESTROY: BOOL
);
 
CREATE TABLE INVITATION
(
	ID: OBJECTID -- REQUIRED
	INVITERID: OBJECTID -- REQUIRED
	INVITEEID: OBJECTID -- REQUIRED
	TYPE: STRING -- REQUIRED
	BOARDINVITATION: JSON OBJECT
	{
		BOARDID: OBJECTID 
		STATUS: STRING
	}
	CREATEDAT: DATETIME
	UPDATEDAT: DATETIME
	DESTROY: BOOL
);
 
CREATE TABLE USER
(
	ID: STRING -- REQUIRED
	EMAIL: uNIQUE -- REQUIRED
	PASSWORD: -- REQUIRED
	USERNAME: UNIQUE
	DISPLAYNAME: STRING
	AVATAR:
	ROLE
	ISACTIVE: BOOL
	VERIFYTOKEN: STRING
	CREATEDAT: DATETIME
	UPDATEDAT: DATETIME
);